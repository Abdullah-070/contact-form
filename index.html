<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Form</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="form-wrapper">
            <div class="form-header">
                <h1>Contact Us</h1>
                <p>We'd love to hear from you. Send us a message and we'll respond as soon as possible.</p>
            </div>

            <form class="contact-form" id="contactForm" novalidate>
                <div class="form-group">
                    <label for="fullName" class="form-label">Full Name *</label>
                    <input 
                        type="text" 
                        id="fullName" 
                        name="fullName" 
                        class="form-input" 
                        required
                        placeholder="Enter your full name"
                    >
                    <span class="error-message" id="fullNameError"></span>
                </div>

                <div class="form-group">
                    <label for="email" class="form-label">Email Address *</label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email" 
                        class="form-input" 
                        required
                        placeholder="Enter your email address"
                    >
                    <span class="error-message" id="emailError"></span>
                </div>

                <div class="form-group">
                    <label for="subject" class="form-label">Subject *</label>
                    <input 
                        type="text" 
                        id="subject" 
                        name="subject" 
                        class="form-input" 
                        required
                        placeholder="Enter the subject"
                    >
                    <span class="error-message" id="subjectError"></span>
                </div>

                <div class="form-group">
                    <label for="message" class="form-label">Message *</label>
                    <textarea 
                        id="message" 
                        name="message" 
                        class="form-textarea" 
                        rows="6" 
                        required
                        placeholder="Enter your message here..."
                    ></textarea>
                    <span class="error-message" id="messageError"></span>
                </div>

                <button type="submit" class="submit-btn">
                    <span class="btn-text">Send Message</span>
                    <span class="btn-spinner"></span>
                </button>
            </form>

            <!-- Success message -->
            <div class="success-message" id="successMessage">
                <div class="success-icon">âœ“</div>
                <h3>Message Sent Successfully!</h3>
                <p>Thank you for contacting us. We'll get back to you soon.</p>
            </div>
        </div>
    </div>

    <script>
        const form = document.getElementById('contactForm');
        const submitBtn = form.querySelector('.submit-btn');
        const successMessage = document.getElementById('successMessage');

        // Form validation patterns
        const validationRules = {
            fullName: {
                required: true,
                minLength: 2,
                pattern: /^[a-zA-Z\s]+$/,
                message: 'Please enter a valid full name (letters and spaces only, minimum 2 characters)'
            },
            email: {
                required: true,
                pattern: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
                message: 'Please enter a valid email address'
            },
            subject: {
                required: true,
                minLength: 3,
                message: 'Please enter a subject (minimum 3 characters)'
            },
            message: {
                required: true,
                minLength: 10,
                message: 'Please enter a message (minimum 10 characters)'
            }
        };

        // Validate single field
        function validateField(fieldName, value) {
            const rules = validationRules[fieldName];
            const errorElement = document.getElementById(fieldName + 'Error');
            const inputElement = document.getElementById(fieldName);

            // Reset previous validation state
            errorElement.textContent = '';
            inputElement.classList.remove('error', 'success');

            // Check required
            if (rules.required && !value.trim()) {
                showError(inputElement, errorElement, `${fieldName.charAt(0).toUpperCase() + fieldName.slice(1)} is required`);
                return false;
            }

            // Check minimum length
            if (rules.minLength && value.length < rules.minLength) {
                showError(inputElement, errorElement, rules.message);
                return false;
            }

            // Check pattern
            if (rules.pattern && !rules.pattern.test(value)) {
                showError(inputElement, errorElement, rules.message);
                return false;
            }

            // Field is valid
            inputElement.classList.add('success');
            return true;
        }

        // Show error
        function showError(inputElement, errorElement, message) {
            inputElement.classList.add('error');
            errorElement.textContent = message;
        }

        // Add real-time validation
        Object.keys(validationRules).forEach(fieldName => {
            const field = document.getElementById(fieldName);
            
            field.addEventListener('blur', () => {
                validateField(fieldName, field.value);
            });

            field.addEventListener('input', () => {
                // Clear error state when user starts typing
                if (field.classList.contains('error')) {
                    field.classList.remove('error');
                    document.getElementById(fieldName + 'Error').textContent = '';
                }
            });
        });

        // Handle form submission
        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            // Get form data
            const formData = new FormData(form);
            const data = Object.fromEntries(formData);

            // Validate all fields
            let isValid = true;
            Object.keys(validationRules).forEach(fieldName => {
                if (!validateField(fieldName, data[fieldName] || '')) {
                    isValid = false;
                }
            });

            if (!isValid) {
                // Scroll to first error
                const firstError = form.querySelector('.error');
                if (firstError) {
                    firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    firstError.focus();
                }
                return;
            }

            // Show loading state
            submitBtn.classList.add('loading');
            submitBtn.disabled = true;

            try {
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 2000));

                // Show success message
                form.style.display = 'none';
                successMessage.style.display = 'block';
                
                // Reset form after delay
                setTimeout(() => {
                    form.reset();
                    form.style.display = 'block';
                    successMessage.style.display = 'none';
                    
                    // Clear validation states
                    form.querySelectorAll('.form-input, .form-textarea').forEach(input => {
                        input.classList.remove('error', 'success');
                    });
                    form.querySelectorAll('.error-message').forEach(error => {
                        error.textContent = '';
                    });
                }, 3000);

            } catch (error) {
                alert('There was an error sending your message. Please try again.');
            } finally {
                submitBtn.classList.remove('loading');
                submitBtn.disabled = false;
            }
        });
    </script>
</body>
</html>
